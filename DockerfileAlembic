FROM python:3.11-slim-buster
COPY ./migrations ./migrations
COPY ./database/models.py ./database/models.py
COPY ./alembic.ini .
WORKDIR .

RUN python3 -m pip install alembic && \
    python3 -m pip install psycopg2-binary


CMD ["alembic", "upgrade", "head"]